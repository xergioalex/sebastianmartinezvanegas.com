<!DOCTYPE html><html lang="es" data-astro-cid-yu3cdcui> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run MCP Server in a Docker sandbox</title><!-- Used to add dark mode right away, adding here prevents any flicker --><!-- <script is:inline>
      if (typeof Storage !== 'undefined') {
        if (localStorage.getItem('dark_mode') && localStorage.getItem('dark_mode') == 'true') {
          document.documentElement.classList.add('dark');
        }
      }
    </script> --><link rel="icon" type="image/x-icon" href="../assets/images/favicon.png"><script type="module">window.darkMode=!1;const s=["fixed","h-14"],d=["absolute","h-20"],l=["border-neutral-300/50","bg-white/80","dark:border-neutral-600/40","dark:bg-neutral-900/60","backdrop-blur-2xl"],o=["border-transparent"];let e=null;document.addEventListener("DOMContentLoaded",()=>{e=document.getElementById("header"),stickyHeaderFuncionality(),applyMenuItemClasses(),evaluateHeaderPosition(),i()});window.stickyHeaderFuncionality=()=>{window.addEventListener("scroll",()=>{evaluateHeaderPosition()})};window.evaluateHeaderPosition=()=>{window.scrollY>16?(e.firstElementChild.classList.add(...l),e.firstElementChild.classList.remove(...o),e.classList.add(...s),e.classList.remove(...d),document.getElementById("menu").classList.add("top-[56px]"),document.getElementById("menu").classList.remove("top-[75px]")):(e.firstElementChild.classList.remove(...l),e.firstElementChild.classList.add(...o),e.classList.add(...d),e.classList.remove(...s),document.getElementById("menu").classList.remove("top-[56px]"),document.getElementById("menu").classList.add("top-[75px]"))};window.applyMenuItemClasses=()=>{const n=document.querySelectorAll("#menu a");for(let t=0;t<n.length;t++)n[t].pathname===window.location.pathname&&n[t].classList.add("text-neutral-900","dark:text-white")};function i(){document.getElementById("openMenu").addEventListener("click",()=>{openMobileMenu()}),document.getElementById("closeMenu").addEventListener("click",()=>{closeMobileMenu()})}window.openMobileMenu=()=>{document.getElementById("openMenu").classList.add("hidden"),document.getElementById("closeMenu").classList.remove("hidden"),document.getElementById("menu").classList.remove("hidden"),document.getElementById("mobileMenuBackground").classList.add("opacity-0"),document.getElementById("mobileMenuBackground").classList.remove("hidden"),setTimeout(()=>{document.getElementById("mobileMenuBackground").classList.remove("opacity-0")},1)};window.closeMobileMenu=()=>{document.getElementById("closeMenu").classList.add("hidden"),document.getElementById("openMenu").classList.remove("hidden"),document.getElementById("menu").classList.add("hidden"),document.getElementById("mobileMenuBackground").classList.add("hidden")};</script><link rel="stylesheet" href="/assets/main.DOLTRI6u.css">
<link rel="stylesheet" href="/assets/books.KefF0tc8.css">
<style>@font-face{font-family:LaoMN;src:url(/fonts/lao-mn.ttf) format("truetype");font-weight:400;font-style:normal;font-display:swap}html,body{font-family:serif}.prose[data-astro-cid-yu3cdcui] img[data-astro-cid-yu3cdcui]{border-radius:20px}
</style></head> <body class="antialiased dark:bg-neutral-950 bg-cream" data-astro-cid-yu3cdcui> <!-- This is an invisible div with relative position so that it takes up the height of the menu (because menu is absolute/fixed) --><div class="relative w-full h-20 opacity-0 pointer-events-none"></div> <header id="header" class="absolute top-0 z-50 w-full h-20"> <div class="flex items-center justify-between h-full max-w-5xl pl-6 pr-4 mx-auto border-b border-l-0 border-r-0 border-transparent select-none lg:border-r lg:border-l lg:rounded-b-xl"> <div> <a href="/es"><b class="font-laomn">SMV</b></a> </div> <div id="mobileMenuBackground" onclick="closeMobileMenu()" class="fixed inset-0 z-20 hidden w-screen h-screen duration-300 ease-out bg-cream/90 dark:bg-neutral-950/90"></div> <nav class="relative z-30 flex flex-row justify-end w-full text-sm text-neutral-500 dark:text-neutral-400 sm:flex-row"> <div id="menu" class="fixed top-[75px] ease-out duration-300 sm:top-0 w-full left-0 sm:py-0 pt-7 pb-4 dm:mx-0 left-0 z-40 flex-col items-end justify-start hidden w-full h-auto text-sm sm:text-base sm:h-auto sm:relative sm:flex-row sm:flex sm:text-sm sm:w-auto sm:pr-0 sm:pt-0"> <div class="absolute inset-0 top-0 right-0 block w-full h-full px-3 sm:hidden"> <div class="relative w-full h-full bg-cream border border-dashed border-neutral-300 dark:border-neutral-700 backdrop-blur-sm rounded-xl dark:bg-neutral-950"></div> </div> <a href="/es" class="font-laomn relative flex items-center justify-center w-full px-3 py-2 font-medium tracking-wide text-center duration-200 ease-out sm:py-0 sm:mb-0 md:w-auto hover:text-neutral-900 dark:hover:text-white"> Inicio </a><a href="/es/books" class="font-laomn relative flex items-center justify-center w-full px-3 py-2 font-medium tracking-wide text-center duration-200 ease-out sm:py-0 sm:mb-0 md:w-auto hover:text-neutral-900 dark:hover:text-white"> Libros </a><a href="/es/posts" class="font-laomn relative flex items-center justify-center w-full px-3 py-2 font-medium tracking-wide text-center duration-200 ease-out sm:py-0 sm:mb-0 md:w-auto hover:text-neutral-900 dark:hover:text-white"> Entradas </a><a href="/es/contact" class="font-laomn relative flex items-center justify-center w-full px-3 py-2 font-medium tracking-wide text-center duration-200 ease-out sm:py-0 sm:mb-0 md:w-auto hover:text-neutral-900 dark:hover:text-white"> Contacto </a> </div> <div class="flex flex-row items-center justify-center"> <!-- <div class="action-dark">
          <div
            id="darkToggle"
            class="relative flex items-center pl-6 ml-4 font-medium tracking-wide cursor-pointer text-neutral-800 group dark:text-white order-3"
          >
            <div
              class="absolute left-0 flex items-center justify-center w-6 h-6 overflow-hidden border-b border-transparent horizon group-hover:border-neutral-600"
            >
              <svg
                class="absolute w-6 h-6 transition duration-700 transform ease"
                id="sun"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke="currentColor"
                ><path
                  d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                ></path></svg
              >
              <svg
                class="absolute hidden w-6 h-6 transition duration-700 transform ease"
                id="moon"
                fill="none"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                stroke="currentColor"
                ><path d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                ></path></svg
              >
            </div>
            <span class="hidden sm:inline-block">
              <span id="dayText" class="ml-2"></span>
              <span id="nightText" class="hidden ml-2"></span>
            </span>
          </div>
        </div> --> <div class="action-lang ml-4"> <button id="lang-menu" type="button" class="inline-flex items-center justify-center bg-transparent border-0 shadow-none rounded-none p-0 m-0 text-xl leading-none align-middle focus:outline-none focus:ring-0 min-w-0 min-h-0" aria-haspopup="true" aria-expanded="false" onclick="document.getElementById('lang-dropdown').classList.toggle('hidden')"> <span class="text-xl leading-none align-middle relative top-[2px]">üá™üá∏</span> <svg class="ml-1 w-3 h-3 text-neutral-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"> <path d="M19 9l-7 7-7-7"></path> </svg> </button> <div id="lang-dropdown" class="absolute right-0 mt-2 w-28 bg-cream dark:bg-neutral-900 rounded-lg shadow-lg border border-neutral-200 dark:border-neutral-700 z-50 py-1 hidden"> <a href="/en/posts/guide-to-running-mcp-server-in-a-sandbox" class="flex items-center gap-2 px-3 py-1 hover:bg-cream-dark transition-colors text-[15px] rounded-lg"> <span class="text-xl">üá¨üáß</span> <span>English</span> </a> </div> </div> <div class="action-menu"> <div id="closeMenu" class="flex flex-col items-end justify-center hidden w-6 h-6 ml-4 -translate-x-1 cursor-pointer sm:hidden"> <svg class="w-6 h-6 text-neutral-600 dark:text-neutral-200" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M6 18L18 6M6 6l12 12"></path></svg> </div> <div id="openMenu" class="flex flex-col items-end justify-center w-6 h-6 ml-4 cursor-pointer sm:hidden"> <svg class="w-8 h-8 dark:text-neutral-200" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 8h16M4 16h16"></path></svg> </div> </div> </div> </nav> </div> </header> <script type="module">document.addEventListener("click",function(e){const d=document.getElementById("lang-menu"),n=document.getElementById("lang-dropdown"),t=e.target;n.classList.contains("hidden")||!n.contains(t)&&!d.contains(t)&&n.classList.add("hidden")});</script>  <main class="relative z-30 max-w-4xl pb-1 mx-auto mt-10 bg-white dark:bg-neutral-950 md:rounded-t-md text-neutral-900"> <div class="relative flex flex-col px-5 pt-6 border-t border-b-0 md:border-r md:border-l md:pt-20 lg:px-0 justify-stretch md:rounded-t-2xl border-neutral-200 dark:border-neutral-800"> <div class="absolute top-0 left-0 hidden w-px h-full mt-1 -translate-x-px md:block bg-gradient-to-b from-transparent to-white dark:to-neutral-950"></div> <div class="absolute top-0 right-0 hidden w-px h-full mt-1 translate-x-px md:block bg-gradient-to-b from-transparent to-white dark:to-neutral-950"></div> <h1 class="w-full max-w-2xl mx-auto text-3xl font-bold leading-tight tracking-tighter text-left md:mb-12 md:text-4xl dark:text-neutral-100 lg:text-5xl md:leading-none"> Run MCP Server in a Docker sandbox </h1> </div> <article class="w-full max-w-2xl mx-auto mb-20 prose-sm prose px-7 lg:px-0 lg:prose-lg dark:prose-invert">  <p>MCP is a hot protocol in the AI development industry this year, but its Client/Server (C/S) architecture requires users to run the MCP Server locally.</p>
<p>Common ways to run MCP Server include stdio methods like npx (NPM ecosystem), uvx (Python ecosystem), Docker, and HTTP (SSE/Streaming) methods. However, running commands with npx and uvx carries significant risks. Accidentally executing a malicious package could lead to sensitive data exposure, posing a major security threat. For details, you can refer to Invariant‚Äôs article <a href="https://invariantlabs.ai/blog/mcp-security-notification-tool-poisoning-attacks">MCP Security Notification: Tool Poisoning Attacks</a>.</p>
<p>As a software industry professional, I have a high degree of concern for security. I asked ChatGPT to compile a list of NPM and PyPI supply chain attack incidents from the past 5 years, and it was chilling.</p>
<p>| <strong>Time</strong>            | <strong>Event</strong>                                           | <strong>Summary and Scope of Impact</strong>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ------------------- | --------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <strong>February 2021</strong>   | <strong>‚ÄúDependency Confusion‚Äù Vulnerability Disclosure</strong> | Security researcher Alex Birsan utilized the <strong>Dependency Confusion</strong> technique to upload packages to NPM/PyPI with the same names as internal libraries used by multiple companies, successfully infiltrating the internal servers of 35 major companies including Apple and Microsoft (<a href="https://www.sonatype.com/blog/pypi-flooded-with-over-1200-dependency-confusion-packages#:~:text=Dependency%20confusion%3A%20Year%20in%20review">PyPI flooded with 1,275 dependency confusion packages</a>). This demonstration sparked high concern within the industry regarding supply chain risks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <strong>October 2021</strong>    | <strong>UAParser.js Library Hijacked</strong>                    | The popular library <em>ua-parser-js</em> on NPM, with over 7 million weekly downloads, was compromised by attackers via the maintainer‚Äôs account to publish malicious versions (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=%23%23%20%20Popular%20%22ua,Attacked">A Timeline of SSC Attacks, Curated by Sonatype</a>). Infected versions implanted <strong>password-stealing trojans</strong> and <strong>cryptocurrency miners</strong> upon installation, affecting a large number of developer systems.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <strong>October 2021</strong>    | <strong>Poisoning via Fake Roblox Libraries</strong>             | Attackers uploaded multiple packages impersonating Roblox API on NPM (e.g., <em>noblox.js-proxy</em>), containing obfuscated malicious code. These packages would implant <strong>trojans and ransomware</strong> payloads after installation (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=,and%20has%20a%20Spooky%20Surprise">A Timeline of SSC Attacks, Curated by Sonatype</a>). These packages were downloaded thousands of times, demonstrating attackers used <strong>typosquatting</strong> to trick game developers.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <strong>November 2021</strong>   | <strong>COA and RC Libraries Successively Hijacked</strong>      | Popular libraries on NPM, <em>coa</em> (millions of weekly downloads) and <em>rc</em> (14 million weekly downloads), were successively compromised to publish malicious versions. The affected versions executed <strong>credential-stealing trojans</strong> similar to the UAParser.js case, at one point causing build pipelines to break for numerous projects globally using frameworks like React (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=,js">A Timeline of SSC Attacks, Curated by Sonatype</a>) (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=,Is%20Hijacked%2C%20Too">A Timeline of SSC Attacks, Curated by Sonatype</a>). Official investigations determined the cause in both cases was compromised maintainer accounts.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <strong>January 2022</strong>    | <strong>Colors/Faker Open Source Libraries ‚ÄúSuicide‚Äù</strong>    | The authors of the famous color formatting library <em>colors.js</em> and test data generation library <em>faker.js</em>, out of protest, injected destructive code like infinite loops in the latest versions, causing thousands of projects, including those at companies like Meta (Facebook) and Amazon, to crash (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=Thousands%20of%20open%20source%20projects,companies%20exploiting%20open%20source">A Timeline of SSC Attacks, Curated by Sonatype</a>) (While not an external attack, it falls within the scope of supply chain poisoning).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <strong>January 2022</strong>    | <strong>PyPI: 1,275 Malicious Packages Deployed in Bulk</strong> | A single user frantically published <strong>1,275 malicious packages</strong> to PyPI in one day on January 23rd (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=,Than%201%2C200%20Dependency%20Confusion%20Packages">A Timeline of SSC Attacks, Curated by Sonatype</a>). Most of these packages impersonated the names of well-known projects or companies (e.g., <em>xcryptography</em>, <em>Sagepay</em>, etc.). After installation, they collected fingerprint information like hostname, IP, etc., and exfiltrated it to the attackers via DNS/HTTP (<a href="https://www.sonatype.com/blog/pypi-flooded-with-over-1200-dependency-confusion-packages#:~:text=The%20,of%20these%20components%20are%20installed">PyPI flooded with 1,275 dependency confusion packages</a>) (<a href="https://www.sonatype.com/blog/pypi-flooded-with-over-1200-dependency-confusion-packages#:~:text=For%20DNS%3A%20.sub.deliverycontent,online">PyPI flooded with 1,275 dependency confusion packages</a>). PyPI administrators took down all related packages within an hour of receiving the report (<a href="https://www.sonatype.com/blog/pypi-flooded-with-over-1200-dependency-confusion-packages#:~:text=All%20of%20the%201%2C275%20were,an%20hour%20of%20our%20report">PyPI flooded with 1,275 dependency confusion packages</a>).                                                                           |
| <strong>March 2022</strong>      | <strong>Node-ipc ‚ÄúProtestware‚Äù Incident</strong>                 | The author of <em>node-ipc</em>, a commonly used front-end build library, added malicious code in versions v10.1.1‚Äì10.1.3: when detecting client IPs belonging to Russia or Belarus, it would <strong>wipe the file system</strong> and overwrite files with heart emojis (<a href="https://www.zdnet.com/article/corrupted-open-source-software-enters-the-russian-battlefield/#:~:text=To%20be%20exact%2C%20Miller%20added,annoying%20to%20a%20system%20destroyer">Corrupted open-source software enters the Russian battlefield                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | ZDNET</a>) (<a href="https://www.zdnet.com/article/corrupted-open-source-software-enters%20the%20russian%20battlefield/#:~:text=According%20to%20developer%20security%20company,8%2C%20critical">Corrupted open-source software enters the Russian battlefield                                                                                                                                                                                                                                                             | ZDNET</a>). This library was widely depended upon by Vue CLI, etc., causing widespread damage to user systems and was assigned CVE-2022-23812 (CVSS 9.8) (<a href="https://www.zdnet.com/article/corrupted-open-source-software-enters-the-russian-battlefield/#:~:text=According%20to%20developer%20security%20company,8%2C%20critical">Corrupted open-source software enters the Russian battlefield                                                                                                                                          | ZDNET</a>).                                |
| <strong>October 2022</strong>    | <strong>LofyGang Large-Scale Poisoning Campaign</strong>         | Security companies discovered a group named ‚ÄúLofyGang‚Äù distributed nearly <strong>200 malicious packages</strong> on NPM (<a href="https://thehackernews.com/2022/10/lofygang-distributed-200-malicious-npm.html#:~:text=Multiple%20campaigns%20that%20distributed%20trojanized,single%20threat%20actor%20dubbed%20LofyGang">LofyGang Distributed ~200 Malicious NPM Packages to Steal Credit Card Data</a>). These packages implanted <strong>trojans</strong> through <strong>typosquatting</strong> and by impersonating common library names, stealing developers‚Äô credit card information, Discord accounts, and game service login credentials, accumulating thousands of installations (<a href="https://thehackernews.com/2022/10/lofygang-distributed-200-malicious-npm.html#:~:text=Multiple%20campaigns%20that%20distributed%20trojanized,single%20threat%20actor%20dubbed%20LofyGang">LofyGang Distributed ~200 Malicious NPM Packages to Steal Credit Card Data</a>). This was an organized cybercrime activity that lasted over a year.                                                                                                                                                                                                                                                                                                                                                                         |
| <strong>December 2022</strong>   | <strong>PyTorch-nightly Dependency Chain Attack</strong>         | Well-known deep learning framework PyTorch disclosed that its nightly version suffered a <strong>dependency confusion</strong> supply chain attack between December 25-30 (<a href="https://www.wiz.io/blog/malicious-pytorch-dependency-torchtriton-on-pypi-everything-you-need-to-know#:~:text=means%20that%20anyone%20who%20downloaded,and%20rotate%20any%20discovered%20keys">Malicious PyTorch dependency ‚Äòtorchtriton‚Äô on PyPI                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Wiz Blog</a>). Attackers registered a malicious package named <em>torchtriton</em> on PyPI, sharing the same name as a private dependency required by the PyTorch nightly version, resulting in thousands of users who installed the nightly version via pip being affected (<a href="https://www.wiz.io/blog/malicious-pytorch-dependency-torchtriton-on-pypi-everything%20you%20need%20to%20know#:~:text=means%20that%20anyone%20who%20downloaded,and%20rotate%20any%20discovered%20keys">Malicious PyTorch dependency ‚Äòtorchtriton‚Äô on PyPI | Wiz Blog</a>). The malicious <em>torchtriton</em> package, when run, collected system environment variables and secrets and uploaded them to the attacker‚Äôs server, jeopardizing users‚Äô cloud credential security. PyTorch officially issued an urgent warning and replaced the namespace (<a href="https://www.wiz.io/blog/malicious-pytorch-dependency-torchtriton-on-pypi-everything%20you%20need%20to%20know#:~:text=The%20creator%20of%20the%20copied,were%20stored%20on%20impacted%20resources">Malicious PyTorch dependency ‚Äòtorchtriton‚Äô on PyPI | Wiz Blog</a>). |
| <strong>March 2023</strong>      | <strong>‚ÄúW4SP Stealer‚Äù Trojan Rampant on PyPI</strong>           | Security researchers successively discovered a large number of malicious packages carrying the <strong>W4SP Stealer</strong> information-stealing trojan appearing on PyPI (<a href="https://thehackernews.com/2022/12/w4sp-stealer-discovered-in-multiple.html#:~:text=Threat%20actors%20have%20published%20yet,malware%20on%20compromised%20developer%20machines">W4SP Stealer Discovered in Multiple PyPI Packages Under Various Names</a>). These trojans have many aliases (e.g., ANGEL Stealer, PURE Stealer, etc.) but essentially all belong to the W4SP family, specifically designed to steal information like user passwords, cryptocurrency wallets, and Discord tokens (<a href="https://thehackernews.com/2022/12/w4sp-stealer-discovered-in%20multiple.html#:~:text=Interestingly%2C%20while%20the%20malware%20goes,be%20copies%20of%20W4SP%20Stealer">W4SP Stealer Discovered in Multiple PyPI Packages Under Various Names</a>). A single report revealed 16 such malicious packages (e.g., <em>modulesecurity</em>, <em>easycordey</em>, etc.) (<a href="https://thehackernews.com/2022/12/w4sp-stealer-discovered-in-multiple.html#:~:text=The%2016%20rogue%20modules%20are,nowsys%2C%20upamonkws%2C%20captchaboy%2C%20and%20proxybooster">W4SP Stealer Discovered in Multiple PyPI Packages Under Various Names</a>). PyPI initiated a cleanup targeting such trojans and strengthened upload detection. |
| <strong>August 2023</strong>     | <strong>Lazarus Group Attacks PyPI</strong>                      | ReversingLabs reported that a branch of the North Korean hacking group Lazarus published over two dozen (more than 24) malicious packages disguised as popular libraries on PyPI (codenamed ‚ÄúVMConnect‚Äù operation) (<a href="https://www.reversinglabs.com/blog/a-partial-history-of-software-supply-chain-attacks#:~:text=">Software Supply Chain Attacks: A (partial) History</a>). These packages attempted to target users in specific industries (e.g., finance) to implant remote access trojans. It is claimed this attack is linked to previous similar activities targeting NuGet, showing state-sponsored hackers‚Äô interest in the open-source supply chain.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <strong>2024 and Beyond</strong> | <strong>Ongoing Supply Chain Threats</strong>                    | Since 2024, new poisoning incidents continue to emerge on NPM and PyPI. For example, in early 2024, fake VS Code-related NPM packages were found to contain remote control spyware (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=,altered%20ScreenConnect%20utility%20as%20spyware">A Timeline of SSC Attacks, Curated by Sonatype</a>), and PyPI packages impersonating Solana libraries to steal crypto wallet keys (<a href="https://www.sonatype.com/resources/vulnerability-timeline#:~:text=%23%23%20%20Ideal%20typosquat%20%27solana,steals%20your%20crypto%20wallet%20keys">A Timeline of SSC Attacks, Curated by Sonatype</a>) were discovered. This indicates that supply chain attacks have become a normalized threat, requiring the ecosystem to continuously raise vigilance and defense capabilities.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |</p>
<p>I complained a bit on Twitter, and while complaining, I saw a tweet from a friend who had just encountered a supply chain attack incident.</p>
<p><a href="https://x.com/tcdwww/status/1914202659210359108"><img src="https://static.miantiao.me/share/ZUy0MY/twitter.jpeg" alt="Twitter"></a></p>
<p>Fortunately, <a href="https://x.com/TBXark">@TBXark</a> recommended his <strong>MCP Proxy</strong> project, which makes it very convenient to run MCP Server in Docker. His initial goal was to run MCP Server on a server to reduce client load and facilitate mobile client calls. However, Docker‚Äôs inherent isolation features perfectly aligned with my requirement for a sandbox.</p>
<p>MCP Proxy runs MCP Servers in Docker and converts the protocol to MCP SSE, allowing users to make all calls via the SSE protocol from the MCP client. This can significantly reduce the risk of arbitrary file reading caused by directly running npx and uvx. <em>If deployed on an overseas server, it can also help solve network issues.</em></p>
<p>However, it is currently still possible to read the <code>/config/config.json</code> configuration file of MCP Proxy, but the risk is manageable. I have also raised a feature request with the developer to configure the config file with 400 permissions and run the npx and uvx commands as the nobody user. If this can be implemented, it will perfectly solve the arbitrary file reading issue.</p>
<h2 id="running-mcp-proxy">Running MCP Proxy</h2>
<p><a href="https://github.com/TBXark/mcp-proxy"><img src="https://github.html.zone/TBXark/mcp-proxy" alt="MCP Proxy"></a></p>
<p>If you have your own VPS with Docker deployed, you can use the following command to run MCP Proxy.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>docker run -d -p 9090:9090 -v /path/to/config.json:/config/config.json ghcr.io/tbxark/mcp-proxy:latest</span></span></code></pre>
<p>If you don‚Äôt have your own VPS, you can use the free container service provided by <a href="https://404.li/claw"><strong>claw.cloud</strong></a> ($5 credit per month, GitHub registration must be older than 180 days).</p>
<p>Since Claw has container size limitations, we need to use the following environment variables to configure the cache directories for npx and uvx to prevent container crashes.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>UV_CACHE_DIR=/cache/uv</span></span>
<span class="line"><span>npm_config_cache=/cache/npm</span></span></code></pre>
<p>Simultaneously mount 10GB of storage under the <code>/cache</code> path. Refer to my configuration: 0.5c CPU, 512M Memory, 10G Disk.</p>
<p>The final configuration is as follows:</p>
<p><img src="https://static.miantiao.me/share/g4KUgP/claw.jpg" alt="Claw"></p>
<h2 id="configuring-mcp-proxy">Configuring MCP Proxy</h2>
<p>The configuration file needs to be mounted at the <code>/config/config.json</code> path. For the complete configuration, please refer to <a href="https://github.com/TBXark/mcp-proxy?tab=readme-ov-file#configurationonfiguration">https://github.com/TBXark/mcp-proxy?tab=readme-ov-file#configurationonfiguration</a>.</p>
<p>Below is my configuration, for your reference.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="json"><code><span class="line"><span style="color:#E1E4E8">{</span></span>
<span class="line"><span style="color:#79B8FF">  "mcpProxy"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">    "baseURL"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://mcp.miantiao.me"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "addr"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">":9090"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "name"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"MCP Proxy"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "version"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"1.0.0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">    "options"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "panicIfInvalid"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "logEnabled"</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "authTokens"</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"miantiao.me"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#79B8FF">  "mcpServers"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">    "github"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "command"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"npx"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "args"</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"-y"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"@modelcontextprotocol/server-github"</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#79B8FF">      "env"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">        "GITHUB_PERSONAL_ACCESS_TOKEN"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"&#x3C;YOUR_TOKEN>"</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "fetch"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "command"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"uvx"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#79B8FF">      "args"</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"mcp-server-fetch"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#79B8FF">    "amap"</span><span style="color:#E1E4E8">: {</span></span>
<span class="line"><span style="color:#79B8FF">      "url"</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"https://mcp.amap.com/sse?key=&#x3C;YOUR_TOKEN>"</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
<h2 id="calling-mcp-proxy">Calling MCP proxy</h2>
<p>Taking <a href="https://404.li/chatwise"><strong>ChatWise</strong></a> calling fetch as an example, just configure the SSE protocol directly.</p>
<p><img src="https://static.miantiao.me/share/mI3zIh/fetch.jpg" alt="fetch"></p>
<p>Isn‚Äôt it simple? When <a href="https://404.li/chatwise"><strong>ChatWise</strong></a> releases its mobile version, calling it this way will also be fully usable.</p>
<p><img src="https://static.miantiao.me/share/t43O9e/chatwise.jpg" alt="ChatWise"></p>  </article> </main>  <section class="text-gray-700 bg-cream border-t mt-10 sm:mt-16 dark:bg-neutral-950 border-neutral-200 dark:border-neutral-800"> <div class="container flex flex-col items-center py-8 mx-auto px-7 max-w-7xl sm:flex-row"> <div><a href="/es"><b class="font-laomn">SMV</b></a></div> <p class="mt-4 text-sm text-neutral-700 dark:text-neutral-100 sm:ml-4 sm:pl-4 sm:border-l sm:border-neutral-300 dark:sm:border-neutral-700 sm:mt-0 text-center sm:text-left"> <span class="px-2">¬© 2025 Sebasti√°n Mart√≠nez Vanegas</span> <span class="hidden sm:inline">|</span> <span class="block sm:inline px-2">Desarrollado por <a href="https://xergioalex.com" target="_blank" class="underline">XergioAleX</a></span> </p> <span class="inline-flex justify-center mt-4 space-x-5 sm:ml-auto sm:mt-0 sm:justify-start"> <a href="https://www.instagram.com/sinpulmon/" target="_blank" class="text-neutral-500 dark:text-neutral-400 hover:text-neutral-900 dark:hover:text-white"> <span class="sr-only">Instagram</span> <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z" clip-rule="evenodd"></path></svg> </a> </span> </div> </section>   </body></html>